!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);((e,t)=>{const n=document.querySelector(".add__btn"),o=document.querySelector(".container"),a=document.querySelector(".add__type"),l=()=>{e.calculateBudget();const n=e.getBudget();t.displayBudget(n)},r=()=>{e.calculatePercentages();const n=e.getPercentages();t.displayPercentages(n)},c=()=>{const n=t.getInput();if(""!==n.description&&!isNaN(n.value)&&n.value>0){const o=e.addItem(n.type,n.description,n.value);t.addListItem(o,n.type),t.clearFields(),l(),r(),e.saveLocalStorage()}},i=n=>{const o=n.target.parentNode.parentNode.parentNode.parentNode.id,a=o.split("-"),c=a[0],i=a[1];e.delItem(c,i),t.delListItem(o),l(),r(),e.saveLocalStorage()};return{init:()=>{t.displayMonth(),n.addEventListener("click",c),document.addEventListener("keypress",e=>{13===e.keyCode&&c()}),o.addEventListener("click",i),a.addEventListener("change",t.changeType),t.displayBudget({budget:0,totalInc:0,totalExp:0,percentage:-1}),(()=>{const n=JSON.parse(localStorage.getItem("data"));if(n){const o=n.allItems.exp;n.allItems.inc.forEach(e=>{t.addListItem(e,"inc")}),o.forEach(e=>{t.addListItem(e,"exp")});const a=e.getBudget();t.displayBudget(a),r()}})()}}})((()=>{class e{constructor(e,t,n){this.id=e,this.description=t,this.value=n}}class t{constructor(e,t,n){this.id=e,this.description=t,this.value=n}}const n=e=>{let t=0;o.allItems[e].forEach(e=>{t+=e.value}),o.totals[e]=t};if(localStorage.getItem("data")){var o=JSON.parse(localStorage.getItem("data"));console.log(o)}else o={allItems:{exp:[],inc:[]},totals:{exp:0,inc:0},budget:0,percentage:-1},console.log(o);return{addItem:(n,a,l)=>{let r=0;if(o.allItems[n].length>0&&(r=o.allItems[n][o.allItems[n].length-1].id+1),"exp"===n)var c=new e(r,a,l);else"inc"===n&&(c=new t(r,a,l));return o.allItems[n].push(c),c},delItem:(e,t)=>{o.allItems[e]=o.allItems[e].filter(e=>e.id!=t)},calculateBudget:()=>{if(n("inc"),n("exp"),o.budget=o.totals.inc-o.totals.exp,o.totals.inc>0)return o.percentage=Math.round(o.totals.exp/o.totals.inc*100)},calculatePercentages:()=>{o.allItems.exp.forEach(e=>{((e,t)=>{if(t>0)return e.percentage=Math.round(e.value/t*100);e.percentage=-1})(e,o.totals.inc)})},getPercentages:()=>o.allItems.exp.map(e=>(e=>e.percentage)(e)),getBudget:()=>({budget:o.budget,totalInc:o.totals.inc,totalExp:o.totals.exp,percentage:o.percentage}),saveLocalStorage:()=>{localStorage.setItem("data",JSON.stringify(o))},testing:()=>{console.log(o)}}})(),(()=>{const e=document.querySelector(".add__type"),t=document.querySelector(".add__description"),n=document.querySelector(".add__value"),o=document.querySelector(".ion-ios-checkmark-outline"),a=document.querySelector(".income__list"),l=document.querySelector(".expenses__list"),r=document.querySelector(".budget__value"),c=document.querySelector(".budget__income--value"),i=document.querySelector(".budget__expenses--value"),s=document.querySelector(".budget__expenses--percentage"),d=document.querySelector(".budget__title--month"),u=(e,t)=>{let n=Math.abs(e);const o=(n=n.toFixed(2)).split(".");let a=o[0];a.length>3&&(a=a.substr(0,a.length-3)+","+a.substr(a.length-3,3));const l=o[1];return"inc"==t?`+ ${a}.${l}`:`- ${a}.${l}`};return{getInput:()=>({type:e.value,description:t.value,value:parseFloat(n.value)}),addListItem:(e,t)=>{if("inc"===t){const n=`\n                <div class="item clearfix" id="inc-${e.id}">\n                    <div class="item__description">${e.description}</div>\n                    <div class="right clearfix">\n                        <div class="item__value">${u(e.value,t)}</div>\n                        <div class="item__delete">\n                            <button class="item__delete--btn"><i class="ion-ios-close-outline"></i></button>\n                        </div>\n                    </div>\n                </div>\n                `;a.insertAdjacentHTML("beforeend",n)}else if("exp"===t){const n=`\n                <div class="item clearfix" id="exp-${e.id}">\n                    <div class="item__description">${e.description}</div>\n                    <div class="right clearfix">\n                        <div class="item__value">${u(e.value,t)}</div>\n                        <div class="item__percentage"></div>\n                        <div class="item__delete">\n                            <button class="item__delete--btn"><i class="ion-ios-close-outline"></i></button>\n                        </div>\n                    </div>\n                </div>\n                `;l.insertAdjacentHTML("beforeend",n)}},delListItem:e=>{document.querySelector(`#${e}`).remove()},clearFields:()=>{t.value="",n.value="",t.focus()},displayBudget:e=>{let t;if(t=e.budget>0?"inc":"exp",r.textContent=u(e.budget,t)+" R$",c.textContent=u(e.totalInc,"inc")+" R$",i.textContent=u(e.totalExp,"exp")+" R$",e.percentage>0)return s.textContent=e.percentage+" %";s.textContent="--"},displayPercentages:e=>{document.querySelectorAll(".item__percentage").forEach((t,n)=>{t.textContent=e[n]+"%"})},displayMonth:()=>{const e=(new Date).getMonth();d.textContent=["Janeiro","Fevereiro","MarÃ§o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][e]},changeType:()=>{[e,t,n].forEach(e=>{e.classList.toggle("red-focus")}),o.classList.toggle("red")}}})()).init()}]);